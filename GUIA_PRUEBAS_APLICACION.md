# üìã GU√çA DE PRUEBAS - CRECEPYME

## üöÄ Gu√≠a Completa para Probar la Aplicaci√≥n

### üìå √çNDICE
1. [Requisitos Previos](#requisitos-previos)
2. [Instalaci√≥n y Configuraci√≥n](#instalaci√≥n-y-configuraci√≥n)
3. [Credenciales de Acceso](#credenciales-de-acceso)
4. [Primer Acceso - Super Admin](#primer-acceso---super-admin)
5. [Crear y Configurar un Tenant](#crear-y-configurar-un-tenant)
6. [Acceso como Usuario Tenant](#acceso-como-usuario-tenant)
7. [Pruebas por M√≥dulo](#pruebas-por-m√≥dulo)
8. [Casos de Prueba Espec√≠ficos](#casos-de-prueba-espec√≠ficos)
9. [Verificaci√≥n de Funcionalidades](#verificaci√≥n-de-funcionalidades)
10. [Soluci√≥n de Problemas Comunes](#soluci√≥n-de-problemas-comunes)

---

## üìã REQUISITOS PREVIOS

### Software Necesario:
- **PHP 8.2+**
- **Composer**
- **Node.js 18+** y npm
- **MySQL 8.0+** o **PostgreSQL 14+**
- **Redis** (opcional, para cach√© y colas)

### Verificar Versiones:
```bash
php -v          # Debe mostrar PHP 8.2 o superior
composer -V     # Debe mostrar Composer 2.x
node -v         # Debe mostrar v18.x o superior
npm -v          # Debe mostrar 8.x o superior
mysql --version # o psql --version
```

---

## üõ†Ô∏è INSTALACI√ìN Y CONFIGURACI√ìN

### 1. Clonar el Repositorio
```bash
git clone [URL_DEL_REPOSITORIO]
cd crecepyme
```

### 2. Instalar Dependencias PHP
```bash
composer install
```

### 3. Instalar Dependencias JavaScript
```bash
npm install
```

### 4. Configurar Variables de Entorno
```bash
cp .env.example .env
```

### 5. Editar el archivo `.env`:
```env
APP_NAME=CrecePyme
APP_ENV=local
APP_KEY=
APP_DEBUG=true
APP_URL=http://localhost:8000

DB_CONNECTION=mysql
DB_HOST=127.0.0.1
DB_PORT=3306
DB_DATABASE=crecepyme
DB_USERNAME=root
DB_PASSWORD=

# Configuraci√≥n de Email (para pruebas usar Mailtrap)
MAIL_MAILER=smtp
MAIL_HOST=smtp.mailtrap.io
MAIL_PORT=2525
MAIL_USERNAME=tu_usuario_mailtrap
MAIL_PASSWORD=tu_password_mailtrap
MAIL_ENCRYPTION=tls

# Redis (opcional)
REDIS_HOST=127.0.0.1
REDIS_PASSWORD=null
REDIS_PORT=6379

# Pusher (para notificaciones en tiempo real)
PUSHER_APP_ID=
PUSHER_APP_KEY=
PUSHER_APP_SECRET=
PUSHER_APP_CLUSTER=us2

# SII Chile (Ambiente de Certificaci√≥n)
SII_AMBIENTE=certificacion
SII_CERT_PATH=storage/app/sii/certificados/
```

### 6. Generar Key de Aplicaci√≥n
```bash
php artisan key:generate
```

### 7. Crear Base de Datos
```sql
CREATE DATABASE crecepyme CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

### 8. Ejecutar Migraciones y Seeders
```bash
php artisan migrate:fresh --seed
```

### 9. Crear Link Simb√≥lico para Storage
```bash
php artisan storage:link
```

### 10. Compilar Assets
```bash
npm run dev
# o para producci√≥n:
npm run build
```

### 11. Iniciar el Servidor
```bash
php artisan serve
```

Abrir en el navegador: `http://localhost:8000`

---

## üîê CREDENCIALES DE ACCESO

### üî¥ SUPER ADMINISTRADOR
```
URL: http://localhost:8000/super-admin/login
Email: superadmin@crecepyme.cl
Password: SuperAdmin123!
```

### üîµ USUARIOS POR TENANT

#### Tenant: "Empresa Demo SPA"
```
URL: http://localhost:8000/login

ADMINISTRADOR:
Email: admin@demo.cl
Password: password

CONTADOR:
Email: contador@demo.cl
Password: password

VENDEDOR:
Email: vendedor@demo.cl
Password: password

GERENTE:
Email: gerente@demo.cl
Password: password
```

#### Tenant: "Comercial Test Ltda"
```
URL: http://localhost:8000/login

ADMINISTRADOR:
Email: admin@test.cl
Password: password
```

---

## üë®‚Äçüíº PRIMER ACCESO - SUPER ADMIN

### 1. Acceder al Panel Super Admin
- Ir a: `http://localhost:8000/super-admin/login`
- Ingresar credenciales de Super Admin
- Ser√°s redirigido al Dashboard Super Admin

### 2. Explorar el Dashboard Super Admin
Verificar que puedas ver:
- **M√©tricas Globales:**
  - Total de Tenants
  - Usuarios Activos
  - Ingresos Mensuales
  - Uso de Almacenamiento
  
- **Gr√°ficos:**
  - Crecimiento de Tenants
  - Ingresos por Plan
  - Uso del Sistema

### 3. Gesti√≥n de Tenants
Navegar a: **Tenants** ‚Üí **Lista de Tenants**

Verificar:
- ‚úÖ Ver lista de tenants existentes
- ‚úÖ Buscar y filtrar tenants
- ‚úÖ Ver detalles de cada tenant
- ‚úÖ Editar configuraci√≥n de tenant
- ‚úÖ Suspender/Activar tenants

### 4. Crear Nuevo Tenant
Click en **"Nuevo Tenant"** y completar:
```
Nombre: Mi Empresa Prueba
RUT: 76.123.456-7
Email Admin: admin@miempresa.cl
Plan: Profesional
M√≥dulos: Seleccionar los deseados
```

### 5. Gesti√≥n de Planes
Navegar a: **Planes** ‚Üí **Administrar**

Verificar planes disponibles:
- **B√°sico:** $29.990/mes
- **Profesional:** $59.990/mes
- **Empresarial:** $99.990/mes

### 6. Monitoreo del Sistema
Navegar a: **Sistema** ‚Üí **Monitoreo**

Verificar:
- Estado de servicios
- Logs de actividad
- M√©tricas de rendimiento

---

## üè¢ CREAR Y CONFIGURAR UN TENANT

### 1. Crear Tenant de Prueba
Como Super Admin, crear un nuevo tenant:

```
Informaci√≥n B√°sica:
- Nombre: Prueba Manual SPA
- RUT: 76.555.444-3
- Raz√≥n Social: Empresa de Prueba Manual SPA
- Giro: Servicios Inform√°ticos
- Direcci√≥n: Av. Principal 123
- Comuna: Providencia
- Ciudad: Santiago
- Tel√©fono: +56912345678

Informaci√≥n SII:
- Resoluci√≥n SII: 80
- Fecha Resoluci√≥n: 2014-08-22
- Ambiente: Certificaci√≥n

Usuario Administrador:
- Nombre: Administrador Prueba
- Email: admin@prueba.cl
- Contrase√±a: TestAdmin123!

Plan y M√≥dulos:
- Plan: Profesional
- M√≥dulos: Todos
```

### 2. Configurar Certificado Digital (Opcional)
Para pruebas con SII, subir certificado de pruebas:
- Navegar a: **Configuraci√≥n** ‚Üí **SII**
- Subir archivo .p12
- Ingresar contrase√±a del certificado

---

## üë§ ACCESO COMO USUARIO TENANT

### 1. Cerrar Sesi√≥n de Super Admin
Click en el men√∫ de usuario ‚Üí **Cerrar Sesi√≥n**

### 2. Acceder como Admin del Tenant
- Ir a: `http://localhost:8000/login`
- Email: `admin@demo.cl`
- Password: `password`

### 3. Primer Login - Configuraci√≥n Inicial
Al primer acceso deber√≠as ver:
- Dashboard personalizado seg√∫n el rol
- Notificaci√≥n de bienvenida
- Widgets seg√∫n permisos

### 4. Completar Configuraci√≥n del Tenant
Navegar a: **Configuraci√≥n** ‚Üí **Empresa**

Completar:
- Logo de la empresa (opcional)
- Informaci√≥n adicional
- Configuraci√≥n de folios
- Preferencias de facturaci√≥n

---

## üì¶ PRUEBAS POR M√ìDULO

### üßÆ M√ìDULO CORE (N√∫cleo)

#### 1. Gesti√≥n de Usuarios
**Ruta:** Configuraci√≥n ‚Üí Usuarios

**Pruebas:**
- ‚úÖ Crear nuevo usuario
- ‚úÖ Asignar roles (Admin, Contador, Vendedor)
- ‚úÖ Editar permisos espec√≠ficos
- ‚úÖ Activar/Desactivar usuarios
- ‚úÖ Restablecer contrase√±as

**Datos de Prueba:**
```
Nombre: Juan P√©rez
Email: jperez@prueba.cl
Rol: Vendedor
Permisos: Solo lectura en reportes
```

#### 2. Gesti√≥n de Clientes
**Ruta:** CRM ‚Üí Clientes

**Pruebas:**
- ‚úÖ Crear cliente persona natural
- ‚úÖ Crear cliente empresa
- ‚úÖ Validaci√≥n de RUT chileno
- ‚úÖ Importar clientes desde Excel
- ‚úÖ Exportar listado

**Datos de Prueba:**
```
Empresa:
RUT: 76.111.222-3
Raz√≥n Social: Cliente Test Ltda
Giro: Comercio
Email: contacto@clientetest.cl

Persona:
RUT: 12.345.678-9
Nombre: Mar√≠a Gonz√°lez
Email: maria@email.cl
```

#### 3. Gesti√≥n de Productos
**Ruta:** Inventario ‚Üí Productos

**Pruebas:**
- ‚úÖ Crear producto simple
- ‚úÖ Crear producto con variantes
- ‚úÖ Establecer precios y costos
- ‚úÖ Gestionar stock
- ‚úÖ Cargar im√°genes

**Datos de Prueba:**
```
Nombre: Laptop HP ProBook
SKU: LAP-HP-001
Precio: $599.990
Costo: $450.000
Stock: 10
Categor√≠a: Computaci√≥n
```

### üí∞ M√ìDULO FACTURACI√ìN

#### 1. Crear Factura Electr√≥nica
**Ruta:** Facturaci√≥n ‚Üí Nueva Factura

**Pruebas paso a paso:**

1. **Seleccionar Cliente:**
   - Buscar por RUT o nombre
   - Verificar que se carguen datos autom√°ticamente

2. **Agregar Productos:**
   - Buscar productos por c√≥digo o nombre
   - Modificar cantidad y precio
   - Verificar c√°lculo autom√°tico de totales

3. **Datos de Factura:**
   ```
   Tipo: Factura Electr√≥nica (33)
   Fecha: Hoy
   Condici√≥n Pago: 30 d√≠as
   Observaciones: Factura de prueba
   ```

4. **Revisar y Emitir:**
   - Verificar vista previa
   - Emitir factura
   - Verificar generaci√≥n de XML
   - Descargar PDF

#### 2. Nota de Cr√©dito
**Ruta:** Facturaci√≥n ‚Üí Nueva Nota de Cr√©dito

**Pruebas:**
- ‚úÖ Referenciar factura existente
- ‚úÖ Anulaci√≥n completa
- ‚úÖ Devoluci√≥n parcial
- ‚úÖ Verificar actualizaci√≥n de saldos

#### 3. Gesti√≥n de Pagos
**Ruta:** Facturaci√≥n ‚Üí Pagos

**Pruebas:**
- ‚úÖ Registrar pago total
- ‚úÖ Registrar pago parcial
- ‚úÖ M√∫ltiples formas de pago
- ‚úÖ Aplicar a m√∫ltiples facturas

**Datos de Prueba:**
```
Factura: F-001
Monto: $250.000
Forma de Pago: Transferencia
Fecha: Hoy
Referencia: TRF-12345
```

### üìä M√ìDULO CONTABILIDAD

#### 1. Libro de Ventas
**Ruta:** Contabilidad ‚Üí Libro de Ventas

**Pruebas:**
- ‚úÖ Generar libro mensual
- ‚úÖ Exportar a Excel
- ‚úÖ Exportar formato SII
- ‚úÖ Verificar totales

#### 2. Libro de Compras
**Ruta:** Contabilidad ‚Üí Libro de Compras

**Pruebas:**
- ‚úÖ Registrar factura de compra
- ‚úÖ Cargar XML de proveedor
- ‚úÖ Generar libro mensual
- ‚úÖ Cuadrar IVA

#### 3. Conciliaci√≥n Bancaria
**Ruta:** Contabilidad ‚Üí Conciliaci√≥n

**Pruebas:**
1. **Cargar Cartola:**
   - Subir archivo Excel del banco
   - Verificar parsing correcto

2. **Conciliar Movimientos:**
   - Match autom√°tico
   - Match manual
   - Crear transacciones faltantes

3. **Verificar Saldos:**
   - Saldo seg√∫n libros
   - Saldo seg√∫n banco
   - Diferencias identificadas

### üì¶ M√ìDULO INVENTARIO

#### 1. Movimientos de Inventario
**Ruta:** Inventario ‚Üí Movimientos

**Pruebas:**
- ‚úÖ Entrada por compra
- ‚úÖ Salida por venta
- ‚úÖ Ajuste manual
- ‚úÖ Transferencia entre bodegas

#### 2. Control de Stock
**Ruta:** Inventario ‚Üí Stock

**Pruebas:**
- ‚úÖ Ver stock actual
- ‚úÖ Stock m√≠nimo/m√°ximo
- ‚úÖ Alertas de reposici√≥n
- ‚úÖ Valorizaci√≥n de inventario

### üë• M√ìDULO RRHH

#### 1. Gesti√≥n de Empleados
**Ruta:** RRHH ‚Üí Empleados

**Datos de Prueba:**
```
Nombre: Carlos Mu√±oz
RUT: 15.678.901-2
Cargo: Analista Contable
Departamento: Finanzas
Fecha Ingreso: 01/01/2024
Sueldo Base: $850.000
```

#### 2. Liquidaciones de Sueldo
**Ruta:** RRHH ‚Üí Liquidaciones

**Pruebas:**
- ‚úÖ Generar liquidaci√≥n mensual
- ‚úÖ C√°lculo autom√°tico AFP (10%)
- ‚úÖ C√°lculo autom√°tico Salud (7%)
- ‚úÖ C√°lculo impuesto √∫nico
- ‚úÖ Agregar bonos/descuentos

**Verificar C√°lculos:**
```
Sueldo Base: $850.000
AFP (10%): -$85.000
Salud (7%): -$59.500
Base Imponible: $705.500
Impuesto: Seg√∫n tabla
L√≠quido a Pagar: Verificar total
```

### üõí M√ìDULO E-COMMERCE

#### 1. Configuraci√≥n Tienda
**Ruta:** E-commerce ‚Üí Configuraci√≥n

**Pruebas:**
- ‚úÖ Activar tienda online
- ‚úÖ Configurar m√©todos de pago
- ‚úÖ Configurar env√≠os
- ‚úÖ Personalizar dise√±o

#### 2. Gesti√≥n de Pedidos
**Ruta:** E-commerce ‚Üí Pedidos

**Pruebas:**
- ‚úÖ Ver pedidos pendientes
- ‚úÖ Procesar pedido
- ‚úÖ Generar factura desde pedido
- ‚úÖ Actualizar estado de env√≠o

### üí≥ M√ìDULO POS

#### 1. Apertura de Caja
**Ruta:** POS ‚Üí Abrir Caja

**Datos:**
```
Terminal: CAJA-01
Monto Inicial: $50.000
Cajero: Usuario actual
```

#### 2. Venta R√°pida
**Ruta:** POS ‚Üí Nueva Venta

**Pruebas:**
- ‚úÖ Buscar productos por c√≥digo
- ‚úÖ Aplicar descuentos
- ‚úÖ M√∫ltiples formas de pago
- ‚úÖ Imprimir boleta

#### 3. Cierre de Caja
**Ruta:** POS ‚Üí Cerrar Caja

**Verificar:**
- Total ventas efectivo
- Total ventas tarjeta
- Diferencias de caja
- Generar reporte Z

---

## üß™ CASOS DE PRUEBA ESPEC√çFICOS

### üìÑ CASO 1: Ciclo Completo de Venta

1. **Crear Cliente Nuevo**
   ```
   RUT: 76.999.888-7
   Raz√≥n Social: Empresa Ciclo Completo Ltda
   ```

2. **Crear Cotizaci√≥n**
   - 3 productos diferentes
   - Aplicar 10% descuento
   - Enviar por email

3. **Convertir a Factura**
   - Aprobar cotizaci√≥n
   - Generar factura
   - Emitir al SII

4. **Registrar Pago**
   - 50% transferencia
   - 50% cheque a 30 d√≠as

5. **Verificar:**
   - Estado documentos
   - Libro de ventas
   - Estado de cuenta cliente

### üìä CASO 2: Proceso Contable Mensual

1. **Cerrar Mes Anterior**
   - Generar libros
   - Revisar pendientes

2. **Cargar Compras**
   - 10 facturas de compra
   - Diferentes proveedores
   - Con y sin retenci√≥n

3. **Conciliar Banco**
   - Cargar cartola
   - Identificar pagos
   - Cuadrar saldos

4. **Generar Reportes**
   - F29 preliminar
   - Balance tributario
   - Estado de resultados

### üë• CASO 3: Proceso de N√≥mina

1. **Preparar Per√≠odo**
   - Mes: Actual
   - Verificar empleados activos

2. **Cargar Novedades**
   - Horas extras: 10 hrs
   - Bono: $50.000
   - Licencia: 2 d√≠as

3. **Generar Liquidaciones**
   - Revisar c√°lculos
   - Aprobar
   - Generar PDFs

4. **Contabilizar**
   - Generar asiento contable
   - Verificar cuentas

---

## ‚úÖ VERIFICACI√ìN DE FUNCIONALIDADES

### üîî Notificaciones en Tiempo Real

1. **Configurar Navegador**
   - Permitir notificaciones del sitio

2. **Pruebas:**
   - Crear factura en una sesi√≥n
   - Verificar notificaci√≥n en otra sesi√≥n
   - Click en notificaci√≥n lleva al documento

### üìß Sistema de Emails

1. **Configurar Mailtrap** (para pruebas)
   - Crear cuenta en mailtrap.io
   - Copiar credenciales a .env

2. **Pruebas:**
   - Enviar factura por email
   - Recordatorio de pago
   - Notificaciones de sistema

### üîí Seguridad y Permisos

1. **Pruebas de Roles:**
   - Login como vendedor
   - Intentar acceder a contabilidad
   - Verificar mensaje de error

2. **2FA (Si est√° activo):**
   - Activar en perfil
   - Escanear QR
   - Verificar login con c√≥digo

### üì± Responsividad

1. **Probar en diferentes dispositivos:**
   - Desktop (1920x1080)
   - Tablet (768x1024)
   - M√≥vil (375x667)

2. **Verificar:**
   - Men√∫ m√≥vil funcional
   - Tablas responsivas
   - Formularios adaptables

---

## üîß SOLUCI√ìN DE PROBLEMAS COMUNES

### ‚ùå Error: "SQLSTATE[HY000] [2002] Connection refused"
**Soluci√≥n:**
```bash
# Verificar que MySQL est√© corriendo
sudo service mysql start
# o
mysql.server start
```

### ‚ùå Error: "The Mix manifest does not exist"
**Soluci√≥n:**
```bash
npm run dev
# o
npm run build
```

### ‚ùå Error: "Failed to clear cache"
**Soluci√≥n:**
```bash
php artisan config:clear
php artisan cache:clear
php artisan view:clear
php artisan route:clear
```

### ‚ùå Error: "Class not found" despu√©s de actualizar
**Soluci√≥n:**
```bash
composer dump-autoload
php artisan optimize:clear
```

### ‚ùå Las notificaciones no funcionan
**Verificar:**
1. Credenciales de Pusher en .env
2. `npm run dev` est√° corriendo
3. Permisos del navegador

### ‚ùå No se ven los cambios en el c√≥digo
**Soluci√≥n:**
```bash
php artisan optimize:clear
npm run build
# Limpiar cach√© del navegador (Ctrl+Shift+R)
```

---

## üìù NOTAS IMPORTANTES

### üîê Seguridad
- **NUNCA** usar estas credenciales en producci√≥n
- Cambiar TODAS las contrase√±as antes de ir a producci√≥n
- Configurar certificados SSL reales
- Habilitar 2FA para todos los usuarios admin

### üöÄ Performance
- En producci√≥n usar `npm run build`
- Configurar Redis para cach√©
- Habilitar OPcache en PHP
- Configurar queue workers

### üìä Datos de Prueba
- Los seeders crean datos ficticios
- RUTs de prueba son v√°lidos pero ficticios
- No usar datos reales en ambiente de desarrollo

### üÜò Soporte
- Documentaci√≥n t√©cnica en `/docs`
- Logs en `storage/logs/laravel.log`
- Reportar bugs en el sistema de tickets

---

## üéØ CHECKLIST FINAL

Antes de considerar la aplicaci√≥n lista para producci√≥n:

- [ ] Todas las pruebas pasan exitosamente
- [ ] Sin errores en los logs
- [ ] Performance aceptable (<3s carga de p√°gina)
- [ ] Emails funcionando correctamente
- [ ] Backups autom√°ticos configurados
- [ ] SSL certificado instalado
- [ ] Variables de entorno de producci√≥n
- [ ] Monitoring configurado
- [ ] Documentaci√≥n actualizada
- [ ] Plan de contingencia definido

---

**¬°Felicitaciones! üéâ** 

Si has completado todas estas pruebas exitosamente, la aplicaci√≥n CrecePyme est√° lista para ser utilizada. Recuerda siempre hacer respaldos antes de cualquier actualizaci√≥n importante.

Para soporte adicional o consultas, contactar al equipo de desarrollo.

---
*√öltima actualizaci√≥n: 30/05/2025*
*Versi√≥n del documento: 1.0*